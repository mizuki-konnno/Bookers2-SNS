
  <div class="table_width">
    <table class='table table-bordered'>
      <thead>
        <tr>
          <th>今日の投稿数</th>
          <th>前日の投稿数</th>
          <th>前日比</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><%=  @today_book.count %></td>
          <td><%= @yesterday_book.count %></td>
          <td>
            <% if @yesterday_book.count == 0 %>
              前日の投稿が0のため計算できません
            <% else %>
              <% @the_day_before =   @today_book.count / @yesterday_book.count.to_f  %>
              <%= (@the_day_before * 100).round %>%
            <% end %>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="table_width">
    <table class='table table-bordered'>
      <thead>
        <tr>
          <th>今週の投稿数</th>
          <th>前週の投稿数</th>
          <th>前週比</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><%= @this_week_book.count %></td>
          <td><%= @last_week_book.count %></td>
          <td>
            <% if @last_week_book.count == 0 %>
              前週の投稿が0のため計算できません
            <% else %>
              <% @the_week_before = @this_week_book.count / @last_week_book.count.to_f  %>
              <%= (@the_week_before * 100).round %>%
            <% end %>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <h3>7日分の投稿数</h3>
  <div class="table_width">
    <table class='table table-bordered'>
      <thead>
        <tr>
          <th>6日前</th>
          <th>５日前</th>
          <th>４日前</th>
          <th>３日前</th>
          <th>２日前</th>
          <th>１日前</th>
          <th>今日</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><%= @sixdaysago_book.count %></td>
          <td><%= @fivedaysago_book.count %></td>
          <td><%= @fourdaysago_book.count %></td>
          <td><%= @threedaysago_book.count %></td>
          <td><%= @twodaysago_book.count %></td>
          <td><%= @yesterday_book.count %></td>
          <td><%= @today_book.count %></td>
        </tr>
      </tbody>
    </table>

    <canvas id="myChart" width="400" height="400"></canvas>


<script>
$(document).on('turbolinks:load', function() {
　var ctx = document.getElementById("myChart").getContext('2d');
　var myChart = new Chart(ctx, {
    type: 'line',
    data: {
      labels: ["６日前", "５日前", "４日前", "３日前", "２日前", "１日前","今日"],

      datasets: [{
      label: "投稿した本の数",
      fill: false,
      lineTension: 0,
      backgroundColor: 'rgba(255, 255, 255, 1)',
      borderColor:  'rgba(0,0,255,1)',
      pointBorderColor: "rgba(0,0,255,1)",
      pointBackgroundColor: "#fff",
      pointRadius: 5,
      pointHoverRadius: 8,
      pointHoverBackgroundColor: "rgba(0,0,255,1)",
      pointHoverBorderColor: "rgba(0,0,255,1)",
      pointHitRadius: 10,
      data: [
        <%= @sixdaysago_book.count %>,
        <%= @fivedaysago_book.count %>,
        <%= @fourdaysago_book.count %>,
        <%= @threedaysago_book.count %>,
        <%= @twodaysago_book.count %>,
        <%= @yesterday_book.count %>,
        <%= @today_book.count %>
        ],
      }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero:true
                }
            }]
        },
      hover: {
          mode: 'single'
    　},
    　title: {
        display: true,
        text: "７日間の投稿数の比較"
    　}
  　}
　});
});
</script>

 <div class="text-right">
    <% if user_signed_in? %>.
      <%= form_with url: user_path, method: :get, local: :true do |f| %>
      <%= f.date_field :word %>
      <%= f.submit "検索" %>
    <% end %>
    <% end %>
    </div>

    <% @search.each do |book| %>
     <%= book.title %>
    <% end %>
  </div>